<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podnikov√° Ekonomika I - Interaktivn√≠ P≈ô√≠prava</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Chosen Palette: Warm Professional */
        :root {
            --bg-main: #F9FAFB; /* Cool Gray 50 */
            --bg-card: #FFFFFF;
            --primary: #1E3A8A; /* Blue 900 */
            --secondary: #0F766E; /* Teal 700 */
            --accent: #B45309; /* Amber 700 */
            --text-main: #1F2937; /* Gray 800 */
            --text-muted: #6B7280; /* Gray 500 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 300px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        .nav-item.active {
            background-color: #EFF6FF;
            color: var(--primary);
            border-right: 3px solid var(--primary);
            font-weight: 600;
        }

        .accordion-content {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .accordion-content.open {
            max-height: 2000px; /* Zv√Ω≈°eno pro del≈°√≠ odpovƒõdi */
            opacity: 1;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* Styly pro form√°tov√°n√≠ odpovƒõd√≠ */
        .answer-content ul { list-style-type: disc; padding-left: 1.25rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .answer-content ol { list-style-type: decimal; padding-left: 1.25rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .answer-content li { margin-bottom: 0.25rem; }
        .answer-content strong { color: #111827; font-weight: 600; }
        .answer-content em { font-style: italic; color: #4B5563; }
    </style>
    <!-- Application Structure Plan: Dashboard/Documentation hybrid layout with Sidebar navigation, interactive tools, and accordion Q&A for active recall. -->
    <!-- Visualization & Content Choices: Uses Chart.js for leverage/BEP/WACC visualizations. Content structured into 16 sections matching the exam syllabus. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex h-screen overflow-hidden">

  <a href="index.html"></a>

    <!-- Sidebar Navigation -->
    <aside class="hidden md:flex flex-col w-64 bg-white border-r border-gray-200 h-full shadow-sm z-10">
        <div class="p-6 border-b border-gray-100 flex items-center justify-center bg-blue-900 text-white">
            <h1 class="text-xl font-bold tracking-tight text-center">Podnikov√°<br>Ekonomika I</h1>
        </div>
        <nav class="flex-1 overflow-y-auto custom-scrollbar py-4" id="sidebar-nav">
            <!-- Nav items generated by JS -->
        </nav>
        <div class="p-4 border-t border-gray-100 bg-gray-50 text-xs text-center text-gray-500">
            P≈ô√≠prava na zkou≈°ku
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full relative overflow-hidden">
        
        <!-- Top Bar -->
        <header class="bg-white border-b border-gray-200 p-4 flex justify-between items-center shadow-sm z-20">
            <button id="mobile-menu-btn" class="md:hidden text-gray-600 focus:outline-none">
                <span class="text-2xl">‚ò∞</span>
            </button>
            <div class="flex-1 max-w-2xl mx-auto relative">
                <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">üîç</span>
                <input type="text" id="global-search" placeholder="Hledat v ot√°zk√°ch (nap≈ô. 'WACC', 'bod zvratu')..." 
                       class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
            </div>
            <div class="ml-4 hidden md:block text-sm text-gray-500" id="progress-indicator">
                Zobrazeno: <span id="visible-count" class="font-bold text-blue-900">0</span> ot√°zek
            </div>
        </header>

        <!-- Content Scroll Area -->
        <div id="content-area" class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth custom-scrollbar">
            
            <!-- Intro / Dashboard -->
            <div id="dashboard" class="mb-10 text-center space-y-4">
                <h2 class="text-3xl font-bold text-gray-900">Studijn√≠ p≈ôehled</h2>
                <p class="text-gray-600 max-w-3xl mx-auto">
                    Tato aplikace slou≈æ√≠ jako interaktivn√≠ pr≈Øvodce p≈ôedmƒõtem Podnikov√° ekonomika I. 
                    Obsahuje 16 kl√≠ƒçov√Ωch tematick√Ωch okruh≈Ø s detailnƒõ vypracovan√Ωmi odpovƒõƒèmi a interaktivn√≠mi modely.
                </p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 max-w-4xl mx-auto">
                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                        <div class="text-2xl font-bold text-blue-800">16</div>
                        <div class="text-sm text-blue-600">Tematick√Ωch okruh≈Ø</div>
                    </div>
                    <div class="bg-teal-50 p-4 rounded-xl border border-teal-100">
                        <div class="text-2xl font-bold text-teal-800">56</div>
                        <div class="text-sm text-teal-600">Ot√°zek k procviƒçen√≠</div>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-xl border border-amber-100">
                        <div class="text-2xl font-bold text-amber-800">3</div>
                        <div class="text-sm text-amber-600">Interaktivn√≠ modely</div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-xl border border-purple-100">
                        <div class="text-2xl font-bold text-purple-800">100%</div>
                        <div class="text-sm text-purple-600">P≈ôipravenost</div>
                    </div>
                </div>
            </div>

            <!-- Dynamic Content Container -->
            <div id="modules-container" class="space-y-12 max-w-5xl mx-auto pb-20">
                <!-- Sections will be injected here via JS -->
            </div>

        </div>
    </main>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>
    <div id="mobile-menu" class="fixed inset-y-0 left-0 w-64 bg-white shadow-xl z-40 transform -translate-x-full transition-transform duration-300 md:hidden">
        <div class="p-4 border-b flex justify-between items-center bg-blue-900 text-white">
            <h2 class="font-bold">Navigace</h2>
            <button id="close-mobile-menu" class="text-white text-xl">&times;</button>
        </div>
        <nav class="p-4 overflow-y-auto h-full" id="mobile-nav-content">
            <!-- Mobile nav items -->
        </nav>
    </div>

    <script>
        // --- DATA STORE ---
        const examData = [
            {
                id: "I",
                title: "I. Zdroje Financov√°n√≠ Aktiv",
                intro: "Tato sekce se zab√Ωv√° strukturou kapit√°lu podniku. Kl√≠ƒçov√Ωm t√©matem je rozli≈°en√≠ mezi vlastn√≠mi a ciz√≠mi zdroji, jejich cena, rizika a dopad na rentabilitu podniku prost≈ôednictv√≠m finanƒçn√≠ p√°ky a da≈àov√©ho ≈°t√≠tu.",
                questions: [
                    {
                        q: "1. Uveƒète, zda je √°≈æio rozvahovou polo≈ækou vlastn√≠ho kapit√°lu ƒçi ciz√≠ch zdroj≈Ø. Vysvƒõtlete, jak doch√°z√≠ k tvorbƒõ √°≈æia jako zdroje financov√°n√≠ majetku podniku.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Za≈ôazen√≠:</strong> √Å≈æio (emisn√≠ √°≈æio) je jednoznaƒçnƒõ polo≈ækou <strong>vlastn√≠ho kapit√°lu</strong> (vlastn√≠ch zdroj≈Ø). V rozvaze se vykazuje v pasivech v sekci <strong>Kapit√°lov√© fondy</strong>.</li>
                                    <li><strong>Tvorba a v√Ωznam:</strong> √Å≈æio vznik√° p≈ôi emisi akci√≠ (u a.s.) nebo zvy≈°ov√°n√≠ vkladu (u s.r.o.) jako kladn√Ω rozd√≠l mezi <strong>emisn√≠m kurzem</strong> (tr≈æn√≠ cenou, kterou investor skuteƒçnƒõ zaplat√≠) a <strong>jmenovitou (nomin√°ln√≠) hodnotou</strong> akcie.
                                        <ul>
                                            <li><em>P≈ô√≠klad:</em> Pokud m√° akcie nomin√°ln√≠ hodnotu 5 000 Kƒç, ale d√≠ky atraktivitƒõ podniku jsou investo≈ôi ochotni ji koupit za 6 000 Kƒç, pak 1 000 Kƒç tvo≈ô√≠ emisn√≠ √°≈æio.</li>
                                        </ul>
                                    </li>
                                    <li><strong>D≈Øsledek:</strong> Tento rozd√≠l p≈ôedstavuje pro podnik dodateƒçn√Ω vlastn√≠ kapit√°l, kter√Ω nezvy≈°uje z√°kladn√≠ kapit√°l (a tedy nemƒõn√≠ pod√≠ly na hlasovac√≠ch pr√°vech), ale posiluje finanƒçn√≠ stabilitu firmy.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "2. Uveƒète alespo≈à dvƒõ v√Ωhody a dvƒõ nev√Ωhody spojen√© s vyu≈æ√≠v√°n√≠m ciz√≠ch zdroj≈Ø financov√°n√≠ v podniku.",
                        a: `<div class="answer-content">
                                <strong class="text-green-700 block mb-2">V√Ωhody:</strong>
                                <ol>
                                    <li><strong>Nevznikaj√≠ pr√°va na ≈ô√≠zen√≠:</strong> Vƒõ≈ôitel√© nemaj√≠ hlasovac√≠ pr√°va ani pod√≠l na ≈ô√≠zen√≠ podniku (pokud podnik spl√°c√≠). Vlastn√≠ci si udr≈æuj√≠ kontrolu.</li>
                                    <li><strong>Cena a p√°kov√Ω efekt:</strong> Ciz√≠ kapit√°l je zpravidla levnƒõj≈°√≠ ne≈æ vlastn√≠ a jeho zapojen√≠ zvy≈°uje v√Ωnosnost vlastn√≠ho kapit√°lu (ROE) d√≠ky finanƒçn√≠ p√°ce.</li>
                                    <li><strong>Da≈àov√Ω efekt:</strong> √öroky jsou da≈àovƒõ uznateln√Ωm n√°kladem (da≈àov√Ω ≈°t√≠t), co≈æ re√°lnƒõ zlev≈àuje cenu dluhu.</li>
                                </ol>
                                <strong class="text-red-700 block mt-4 mb-2">Nev√Ωhody:</strong>
                                <ol>
                                    <li><strong>Zv√Ω≈°en√≠ finanƒçn√≠ho rizika:</strong> Pevn√Ω z√°vazek platit √∫roky a jistinu zvy≈°uje riziko bankrotu, pokud podnik nem√° zisk.</li>
                                    <li><strong>Rostouc√≠ n√°klady:</strong> S rostouc√≠ zadlu≈æenost√≠ roste rizikov√° p≈ôir√°≈æka bank, a t√≠m se ka≈æd√Ω dal≈°√≠ dluh st√°v√° dra≈æ≈°√≠m.</li>
                                    <li><strong>Omezen√≠ managementu:</strong> Banky ƒçasto vy≈æaduj√≠ plnƒõn√≠ podm√≠nek (kovenant≈Ø), co≈æ omezuje flexibilitu veden√≠.</li>
                                </ol>
                            </div>`
                    },
                    {
                        q: "3. Proƒç jsou ciz√≠ zdroje levnƒõj≈°√≠ ne≈æ vlastn√≠ zdroje?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Rizikov√Ω profil:</strong> Vƒõ≈ôitel√© podstupuj√≠ <strong>ni≈æ≈°√≠ riziko</strong> ne≈æ vlastn√≠ci (maj√≠ p≈ôednostn√≠ pr√°vo na uspokojen√≠ pohled√°vek). Vlastn√≠ci jsou "zbytkov√≠ rezidenti", proto po≈æaduj√≠ za sv√© vy≈°≈°√≠ riziko vy≈°≈°√≠ v√Ωnos.</li>
                                    <li><strong>Da≈àov√Ω aspekt:</strong> N√°klady na ciz√≠ kapit√°l (√∫roky) sni≈æuj√≠ z√°klad danƒõ, zat√≠mco dividendy (n√°klad na VK) se vypl√°cej√≠ a≈æ ze zisku po zdanƒõn√≠. D√≠ky <strong>da≈àov√©mu ≈°t√≠tu</strong> je efektivn√≠ √∫rokov√° m√≠ra ni≈æ≈°√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "4. Vysvƒõtlete princip finanƒçn√≠ p√°ky. K jak√Ωm efekt≈Øm a za jak√Ωch podm√≠nek vede p≈Øsoben√≠ finanƒçn√≠ p√°ky?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Princip:</strong> Vyu≈æit√≠ ciz√≠ho kapit√°lu (dluhu) k financov√°n√≠ majetku s c√≠lem zv√Ω≈°it ziskovost pro vlastn√≠ky. Funguje jako multiplik√°tor.</li>
                                    <li><strong>Efekt:</strong> Ciz√≠ kapit√°l zvy≈°uje variabilitu v√Ωnosnosti vlastn√≠ho kapit√°lu (ROE). V dobr√Ωch ƒçasech zisk prudce roste, ve ≈°patn√Ωch kles√°.</li>
                                    <li><strong>Podm√≠nka pozitivn√≠ho p≈Øsoben√≠:</strong> Plat√≠ pouze tehdy, pokud je <strong>rentabilita celkov√Ωch aktiv (ROA) vy≈°≈°√≠ ne≈æ √∫rokov√° m√≠ra ciz√≠ho kapit√°lu</strong>.</li>
                                    <li><em>Riziko:</em> Pokud je ROA < √∫rok, p√°ka p≈Øsob√≠ negativnƒõ a "uj√≠d√°" z vlastn√≠ho kapit√°lu.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "5. Vyjmenujte d√≠lƒç√≠ polo≈æky vlastn√≠ho kapit√°lu v rozvahov√©m ƒçlenƒõn√≠.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Z√°kladn√≠ kapit√°l:</strong> Souhrn vklad≈Ø spoleƒçn√≠k≈Ø zapsan√Ω v obchodn√≠m rejst≈ô√≠ku.</li>
                                    <li><strong>Kapit√°lov√© fondy:</strong> Zdroje z vnƒõj≈°ku (emisn√≠ √°≈æio, dary, dotace).</li>
                                    <li><strong>Fondy ze zisku (rezervn√≠ fondy):</strong> Tvo≈ôen√© ze zisku minul√Ωch let.</li>
                                    <li><strong>V√Ωsledek hospoda≈ôen√≠ minul√Ωch let:</strong> Nerozdƒõlen√Ω zisk nebo neuhrazen√° ztr√°ta.</li>
                                    <li><strong>V√Ωsledek hospoda≈ôen√≠ bƒõ≈æn√©ho √∫ƒçetn√≠ho obdob√≠:</strong> Zisk nebo ztr√°ta aktu√°ln√≠ho roku (po zdanƒõn√≠).</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "6. Proƒç je vlastn√≠ kapit√°l dra≈æ≈°√≠, i kdy≈æ nedoch√°z√≠ ke zdanƒõn√≠ p≈ô√≠jm≈Ø?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Je to d√°no <strong>rizikovou pr√©mi√≠</strong>. Vlastn√≠ci nesou nejvy≈°≈°√≠ riziko podnik√°n√≠ ‚Äì nemaj√≠ garantovan√Ω ≈æ√°dn√Ω v√Ωnos a p≈ôi √∫padku jsou uspokojeni jako posledn√≠.</li>
                                    <li>Aby investo≈ôi toto riziko podstoupili, mus√≠ oƒçek√°vat v√Ωnosnost vy≈°≈°√≠, ne≈æ nab√≠zej√≠ bezpeƒçnƒõj≈°√≠ dluhopisy. Tato po≈æadovan√° v√Ωnosnost je pro podnik <strong>n√°klad obƒõtovan√© p≈ô√≠le≈æitosti</strong>.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "7. Vymezte podm√≠nky, za kter√Ωch m≈Ø≈æe v√©st vyu≈æit√≠ ciz√≠ch zdroj≈Ø financov√°n√≠ ke zv√Ω≈°en√≠ v√Ωnosnosti vlastn√≠ho kapit√°lu.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Mus√≠ b√Ωt splnƒõna podm√≠nka pozitivn√≠ finanƒçn√≠ p√°ky: <strong>ROA (v√Ωnosnost aktiv) > √∫rokov√° m√≠ra</strong>.</li>
                                    <li>Podnik mus√≠ sv√Ωmi aktivy vygenerovat vy≈°≈°√≠ procentu√°ln√≠ zhodnocen√≠, ne≈æ kolik ƒçin√≠ n√°klady na obsluhu dluhu. Rozd√≠l pak z≈Øst√°v√° firmƒõ a zvy≈°uje zisk akcion√°≈ô≈Ø.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "8. Popi≈°te, v ƒçem spoƒç√≠v√° efekt da≈àov√©ho ≈°t√≠tu p≈ôi financov√°n√≠ aktiv podniku ciz√≠mi zdroji.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>√öroky z ciz√≠ch zdroj≈Ø jsou n√°kladem, kter√Ω se odeƒç√≠t√° od v√Ωnos≈Ø <strong>p≈ôed v√Ωpoƒçtem danƒõ</strong>.</li>
                                    <li>T√≠m se sni≈æuje z√°klad danƒõ, a podnik tak odvede st√°tu ni≈æ≈°√≠ da≈à. √öspora na dani efektivnƒõ sni≈æuje re√°ln√© n√°klady na dluh.</li>
                                </ul>
                            </div>`
                    }
                ],
                hasTool: "leverage"
            },
            {
                id: "II",
                title: "II. Typologie Podnik≈Ø",
                intro: "Klasifikace podnik≈Ø je nezbytn√° pro statistick√© a pr√°vn√≠ √∫ƒçely. Zde se dozv√≠te o syst√©mu CZ-NACE, sektorech hospod√°≈ôstv√≠ a rozd√≠lech mezi osobn√≠mi a kapit√°lov√Ωmi spoleƒçnostmi.",
                questions: [
                    {
                        q: "9. Popi≈°te, v ƒçem spoƒç√≠v√° podstata a v√Ωznam klasifikace CZ-NACE.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Podstata:</strong> Statistick√° klasifikace ekonomick√Ωch ƒçinnost√≠ platn√° v EU a ƒåR. Ka≈æd√Ω subjekt je za≈ôazen do sekce (A-U) podle p≈ôeva≈æuj√≠c√≠ ƒçinnosti (nap≈ô. C = Zpracovatelsk√Ω pr≈Ømysl).</li>
                                    <li><strong>V√Ωznam:</strong> Umo≈æ≈àuje st√°tu sledovat v√Ωkonnost odvƒõtv√≠, porovn√°vat ekonomiku mezin√°rodnƒõ, nastavovat dotace a analyzovat struktur√°ln√≠ zmƒõny.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "10. ƒå√≠m se vyznaƒçuj√≠ podniky, kter√© n√°le≈æ√≠ do prim√°rn√≠ho sektoru?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Zahrnuje <strong>prvov√Ωrobu</strong> a ƒçinnosti spojen√© s p≈ô√≠rodou.</li>
                                    <li><strong>Charakteristika:</strong> Z√°vislost na p≈ô√≠rodn√≠ch podm√≠nk√°ch, vysok√° n√°roƒçnost na pr√°ci/mechanizaci, ni≈æ≈°√≠ p≈ôidan√° hodnota.</li>
                                    <li><em>P≈ô√≠klady:</em> Zemƒõdƒõlstv√≠, lesnictv√≠, ryb√°≈ôstv√≠, tƒõ≈æba surovin.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "11. V ƒçem spoƒç√≠v√° rozd√≠l mezi osobn√≠mi a kapit√°lov√Ωmi spoleƒçnostmi a jak√© pr√°vn√≠ formy m√°me v ƒåR?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Osobn√≠ spoleƒçnosti (v.o.s., k.s.):</strong>
                                        <ul>
                                            <li>Spojen√≠ osob, osobn√≠ √∫ƒçast na ≈ô√≠zen√≠.</li>
                                            <li><strong>Kl√≠ƒçov√Ω znak:</strong> Neomezen√© ruƒçen√≠ spoleƒçn√≠k≈Ø cel√Ωm majetkem.</li>
                                            <li>Z√°kladn√≠ kapit√°l nen√≠ v≈ædy vy≈æadov√°n.</li>
                                        </ul>
                                    </li>
                                    <li><strong>Kapit√°lov√© spoleƒçnosti (s.r.o., a.s.):</strong>
                                        <ul>
                                            <li>Spojen√≠ kapit√°lu, ≈ô√≠zen√≠ org√°ny spoleƒçnosti.</li>
                                            <li><strong>Kl√≠ƒçov√Ω znak:</strong> Spoleƒçn√≠ci neruƒç√≠ (a.s.) nebo jen omezenƒõ (s.r.o.).</li>
                                            <li>Povinn√° tvorba z√°kladn√≠ho kapit√°lu.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>`
                    }
                ],
                hasTool: "nace_vis"
            },
            {
                id: "III",
                title: "III. V√Ωrobn√≠ Kapacita",
                intro: "V√Ωrobn√≠ kapacita urƒçuje maxim√°ln√≠ v√Ωkonnost podniku. Tato ƒç√°st vysvƒõtluje vztah mezi v√Ωrobnost√≠ a pracnost√≠ a v√Ωpoƒçet kapacitn√≠ch ukazatel≈Ø.",
                questions: [
                    {
                        q: "12. Co je v√Ωrobnost a pracnost?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Jsou to ukazatele produktivity pr√°ce ve vz√°jemnƒõ p≈ôevr√°cen√©m vztahu (V = 1/t).</li>
                                    <li><strong>V√Ωrobnost (V):</strong> V√Ωkonnost za jednotku ƒçasu ‚Äì kolik produkce vyrob√≠me za hodinu (nap≈ô. 10 ks/hod). ƒå√≠m vy≈°≈°√≠, t√≠m l√©pe.</li>
                                    <li><strong>Pracnost (t):</strong> ƒåasov√° n√°roƒçnost ‚Äì kolik ƒçasu spot≈ôebujeme na jeden v√Ωrobek (nap≈ô. 0,1 hod/ks). ƒå√≠m ni≈æ≈°√≠, t√≠m l√©pe.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "13. Co je to v√Ωrobn√≠ kapacita a kapacitn√≠ norma v√Ωrobnosti?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>V√Ωrobn√≠ kapacita (Qp):</strong> Maxim√°ln√≠ mo≈æn√Ω objem v√Ωroby za obdob√≠ (rok) p≈ôi optim√°ln√≠m vyu≈æit√≠.
                                        <br><em>Vzorec:</em> Qp = Tp √ó Vp (Vyu≈æiteln√Ω ƒças √ó Kapacitn√≠ norma).</li>
                                    <li><strong>Kapacitn√≠ norma v√Ωrobnosti (Vp):</strong> Technicky maxim√°ln√≠ v√Ωkon stroje za jednotku ƒçasu p≈ôi dodr≈æen√≠ kvality. Je d√°na technick√Ωmi parametry.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "14. Jak√Ω je rozd√≠l mezi koeficientem vyu≈æit√≠ v√Ωrobn√≠ kapacity, koeficientem intenzivn√≠ho vyu≈æit√≠ a koeficientem extenzivn√≠ho vyu≈æit√≠?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Celkov√Ω koeficient (kc):</strong> Pomƒõr skuteƒçn√© v√Ωroby k teoretick√© kapacitƒõ.</li>
                                    <li><strong>Extenzivn√≠ vyu≈æit√≠ (ƒçasov√©):</strong> Sleduje vyu≈æit√≠ ƒçasu (pomƒõr odpracovan√©ho ƒçasu k vyu≈æiteln√©mu fondu - nap≈ô. prostoje).</li>
                                    <li><strong>Intenzivn√≠ vyu≈æit√≠ (v√Ωkonov√©):</strong> Sleduje vyu≈æit√≠ v√Ωkonu stroje (pomƒõr skuteƒçn√© v√Ωrobnosti k normovan√© - nap≈ô. rychlost stroje).</li>
                                    <li><em>Vztah:</em> Celkov√Ω koeficient = Extenzivn√≠ √ó Intenzivn√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "15. Jak je urƒçov√°na v√Ωrobn√≠ kapacita podniku p≈ôi s√©riov√©m ≈ôazen√≠ d√≠lƒç√≠ch v√Ωrobn√≠ch kapacit?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>P≈ôi ≈ôazen√≠ za sebou je kapacita cel√© linky limitov√°na v√Ωkonem <strong>nejslab≈°√≠ho ƒçl√°nku</strong>.</li>
                                    <li>Tento ƒçl√°nek se naz√Ωv√° <strong>√∫zk√© m√≠sto (bottleneck)</strong>. Zv√Ω≈°en√≠ kapacity linky je mo≈æn√© jen zv√Ω≈°en√≠m kapacity tohoto m√≠sta.</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "IV",
                title: "IV. Likvidnost a Likvidita",
                intro: "Finanƒçn√≠ zdrav√≠ podniku z√°vis√≠ na schopnosti platit z√°vazky. Rozli≈°ujeme mezi likvidnost√≠ aktiv (jak rychle se zmƒõn√≠ na pen√≠ze) a likviditou podniku.",
                questions: [
                    {
                        q: "16. Definujte pojem likvidnost a likvidita.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Likvidnost (vlastnost majetku):</strong> Schopnost majetku p≈ôemƒõnit se rychle a bez ztr√°ty hodnoty na pen√≠ze.</li>
                                    <li><strong>Likvidita (schopnost podniku):</strong> Finanƒçn√≠ stabilita ‚Äì schopnost hradit splatn√© z√°vazky vƒças a v pln√© v√Ω≈°i.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "17. Kter√° aktiva dle rozvahov√©ho ƒçlenƒõn√≠ jsou nejm√©nƒõ likvidn√≠?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Dlouhodob√Ω hmotn√Ω majetek:</strong> Pozemky, budovy, stroje. Prodej je ƒçasovƒõ n√°roƒçn√Ω.</li>
                                    <li>V r√°mci obƒõ≈æn√©ho majetku: <strong>Z√°soby</strong> (zejm√©na nedokonƒçen√° v√Ωroba), kter√© se mus√≠ nejprve zpracovat a prodat.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "18. Kter√° aktiva jsou nejv√≠ce likvidn√≠?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Penƒõ≈æn√≠ prost≈ôedky:</strong> Hotovost a z≈Østatky na √∫ƒçtech.</li>
                                    <li><strong>Kr√°tkodob√Ω finanƒçn√≠ majetek:</strong> Volnƒõ obchodovateln√© cenn√© pap√≠ry (akcie, dluhopisy) zpenƒõ≈æiteln√© na burze.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "19. Uveƒète, proƒç je pro podnik v√Ωhodn√© a nev√Ωhodn√© dr≈æet nadmƒõrn√© mno≈æstv√≠ likvidn√≠ch aktiv.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>V√Ωhoda:</strong> Vysok√° finanƒçn√≠ bezpeƒçnost, nulov√© riziko insolvence, schopnost okam≈æitƒõ reagovat na neƒçekan√© v√Ωdaje/investice.</li>
                                    <li><strong>Nev√Ωhoda:</strong> N√≠zk√° rentabilita. Pen√≠ze na √∫ƒçtu nenesou √∫rok a podl√©haj√≠ inflaci. Znamen√° to neefektivn√≠ vyu≈æit√≠ kapit√°lu.</li>
                                </ul>
                            </div>`
                    }
                ],
                hasTool: "liquidity_pyramid"
            },
            {
                id: "V",
                title: "V. Dlouhodob√Ω Majetek",
                intro: "Dlouhodob√Ω majetek slou≈æ√≠ podniku d√©le ne≈æ jeden rok. Kl√≠ƒçov√Ωm konceptem jsou odpisy, kter√© vyjad≈ôuj√≠ jeho opot≈ôeben√≠.",
                questions: [
                    {
                        q: "20. Lze oznaƒçit ve≈°ker√Ω dlouhodob√Ω majetek podniku za odpisovan√Ω? Proƒç ano/ne?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Ne.</strong> Existuje majetek, kter√Ω se neopot≈ôebov√°v√° nebo z√≠sk√°v√° na hodnotƒõ.</li>
                                    <li><strong>Neodepisovan√Ω majetek:</strong> Pozemky, umƒõleck√° d√≠la, sb√≠rky, kulturn√≠ pam√°tky.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "21. Jakou funkci pln√≠ da≈àov√© odpisy hmotn√©ho majetku?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>N√°stroj fisk√°ln√≠ politiky. Urƒçuj√≠ maxim√°ln√≠ ƒç√°stku pro sn√≠≈æen√≠ <strong>z√°kladu danƒõ</strong> v dan√©m roce.</li>
                                    <li>Jsou d√°ny z√°konem a nemus√≠ odpov√≠dat re√°ln√©mu opot≈ôeben√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "22. Vysvƒõtlete pojem \"mor√°ln√≠ opot≈ôeben√≠\" dlouhodob√©ho majetku.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Ekonomick√© znehodnocen√≠ vlivem <strong>vƒõdecko-technick√©ho pokroku</strong>, i kdy≈æ je majetek funkƒçn√≠.</li>
                                    <li><em>P≈ô√≠klad:</em> Funkƒçn√≠ poƒç√≠taƒç, kter√Ω je ale pomal√Ω pro nov√Ω software, nebo stroj s vy≈°≈°√≠ spot≈ôebou ne≈æ nov√© modely.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "23. Uveƒète, jak√© funkce pln√≠ √∫ƒçetn√≠ odpisy dlouhodob√©ho majetku.",
                        a: `<div class="answer-content">
                                <ol>
                                    <li><strong>N√°kladov√°:</strong> P≈ôen√°≈°ej√≠ hodnotu majetku do n√°klad≈Ø (kalkulace ceny).</li>
                                    <li><strong>Oce≈àovac√≠:</strong> Vyjad≈ôuj√≠ re√°lnou z≈Østatkovou hodnotu v rozvaze.</li>
                                    <li><strong>St≈ô√°dac√≠:</strong> Zadr≈æuj√≠ v podniku pen√≠ze z tr≈æeb (n√°klad bez v√Ωdaje) pro budouc√≠ n√°kup nov√©ho majetku.</li>
                                </ol>
                            </div>`
                    }
                ]
            },
            {
                id: "VI",
                title: "VI. Z√°soby",
                intro: "≈ò√≠zen√≠ z√°sob a jejich oce≈àov√°n√≠ m√° p≈ô√≠m√Ω dopad na vyk√°zan√Ω zisk a da≈àovou povinnost.",
                questions: [
                    {
                        q: "24. Vyjmenujte a popi≈°te metody oce≈àov√°n√≠ z√°sob materi√°lu p≈ôi jeho vyskladnƒõn√≠.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>V√°≈æen√Ω aritmetick√Ω pr≈Ømƒõr:</strong> V√Ωdej se ocen√≠ pr≈Ømƒõrnou cenou z√°sob na skladƒõ.</li>
                                    <li><strong>FIFO (First In, First Out):</strong> Prvn√≠ (nejstar≈°√≠) materi√°l jde do v√Ωroby prvn√≠. P≈ôi inflaci vede k ni≈æ≈°√≠m n√°klad≈Øm a vy≈°≈°√≠mu zisku.</li>
                                    <li><em>(LIFO je v ƒåR pro danƒõ zak√°z√°no).</em></li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "25. Vyjmenujte a popi≈°te metody oce≈àov√°n√≠ z√°sob materi√°lu p≈ôi po≈ô√≠zen√≠.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Po≈ôizovac√≠ cena:</strong> Cena n√°kupu + vedlej≈°√≠ n√°klady (doprava, clo). Pro nakupovan√© z√°soby.</li>
                                    <li><strong>Vlastn√≠ n√°klady:</strong> P≈ô√≠m√© n√°klady + re≈æie. Pro z√°soby vlastn√≠ v√Ωroby.</li>
                                    <li><strong>Reprodukƒçn√≠ po≈ôizovac√≠ cena:</strong> Odhad ceny v dobƒõ √∫ƒçtov√°n√≠. Pro dary nebo p≈ôebytky.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "26. Proƒç je v√Ωhodn√© udr≈æovat z√°soby na co nejvy≈°≈°√≠ nebo nejni≈æ≈°√≠ √∫rovni?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Vysok√° √∫rove≈à:</strong> Plynulost v√Ωroby, uspokojen√≠ neƒçekan√© popt√°vky, ochrana p≈ôed r≈Østem cen.</li>
                                    <li><strong>N√≠zk√° √∫rove≈à:</strong> Minimalizace n√°klad≈Ø na skladov√°n√≠, sn√≠≈æen√≠ rizika zka≈æen√≠/kr√°de≈æe, uvolnƒõn√≠ v√°zan√©ho kapit√°lu.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "27. Vysvƒõtlete, jak m≈Ø≈æete pou≈æitou metodou oce≈àov√°n√≠ z√°sob p≈ôi vyskladnƒõn√≠ ovlivnit svou da≈àovou povinnost.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Metoda (FIFO vs. Pr≈Ømƒõr) mƒõn√≠ v√Ω≈°i n√°klad≈Ø na spot≈ôebu.</li>
                                    <li>P≈ôi <strong>inflaci</strong> metoda <strong>FIFO</strong> pou≈æ√≠v√° levnƒõj≈°√≠ star≈°√≠ z√°soby -> ni≈æ≈°√≠ n√°klady -> vy≈°≈°√≠ zisk -> <strong>vy≈°≈°√≠ da≈à</strong>. Pr≈Ømƒõr by vyk√°zal da≈à ni≈æ≈°√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "28. M≈Ø≈æe podnik pou≈æitou metodou oce≈àov√°n√≠ p≈ôi vyskladnƒõn√≠ ovlivnit hospod√°≈ôsk√Ω v√Ωsledek (zisk)?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Ano, v√Ωznamnƒõ.</strong> N√°klady na materi√°l jsou velkou polo≈ækou. Volba metody p≈ô√≠mo mƒõn√≠ v√Ω≈°i vyk√°zan√©ho provozn√≠ho zisku.</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "VII",
                title: "VII. V√Ωkaz Zisku a Ztr√°ty",
                intro: "V√Ωsledovka ukazuje finanƒçn√≠ v√Ωkonnost podniku. Porovn√°v√° v√Ωnosy a n√°klady za urƒçit√© obdob√≠.",
                questions: [
                    {
                        q: "29. Popi≈°te z√°kladn√≠ strukturu v√Ωkazu zisku a ztr√°ty.",
                        a: `<div class="answer-content">
                                <ol>
                                    <li><strong>Provozn√≠ VH:</strong> V√Ωnosy a n√°klady z hlavn√≠ ƒçinnosti (Tr≈æby - Materi√°l - Mzdy - Odpisy).</li>
                                    <li><strong>Finanƒçn√≠ VH:</strong> Finanƒçn√≠ operace (√öroky, Kurzy).</li>
                                    <li><strong>VH p≈ôed zdanƒõn√≠m:</strong> Souƒçet provozn√≠ho a finanƒçn√≠ho.</li>
                                    <li><strong>VH po zdanƒõn√≠ (EAT):</strong> VH p≈ôed zdanƒõn√≠m minus da≈à.</li>
                                </ol>
                            </div>`
                    },
                    {
                        q: "30. Vysvƒõtlete, v jak√©m smyslu je v√Ωkaz zisku a ztr√°ty propojen s rozvahou.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Propojen√≠:</strong> ƒåist√Ω zisk (nebo ztr√°ta) z v√Ωsledovky se p≈ôenese do pasiv rozvahy jako <strong>V√Ωsledek hospoda≈ôen√≠ bƒõ≈æn√©ho obdob√≠</strong>.</li>
                                    <li>T√≠m se zvy≈°uje (nebo sni≈æuje) vlastn√≠ kapit√°l. Bez toho by rozvaha nebyla vyrovnan√°.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "31. Pat≈ô√≠ do v√Ωkazu zisku a ztr√°ty v≈°echny ekonomick√© n√°klady? Proƒç ano/ne?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Ne.</strong> Vstupuj√≠ sem pouze <strong>explicitn√≠ (√∫ƒçetn√≠) n√°klady</strong> podlo≈æen√© doklady.</li>
                                    <li>Chyb√≠ <strong>implicitn√≠ n√°klady</strong> (obƒõtovan√© p≈ô√≠le≈æitosti), kter√© zohled≈àuje pouze mana≈æersk√© √∫ƒçetnictv√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "32. Popi≈°te, v ƒçem se li≈°√≠ pojet√≠ n√°klad≈Ø v mana≈æersk√©m √∫ƒçetnictv√≠ od pojet√≠ n√°klad≈Ø ve finanƒçn√≠m √∫ƒçetnictv√≠.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Finanƒçn√≠ √∫ƒçetnictv√≠:</strong> Pro extern√≠ reportov√°n√≠ a danƒõ, v√°z√°no z√°konem. T≈ô√≠d√≠ n√°klady <strong>druhovƒõ</strong> (mzdy, materi√°l).</li>
                                    <li><strong>Mana≈æersk√© √∫ƒçetnictv√≠:</strong> Pro intern√≠ rozhodov√°n√≠. Pracuje s <strong>ekonomick√Ωmi n√°klady</strong> (vƒç. implicitn√≠ch), t≈ô√≠d√≠ n√°klady <strong>√∫ƒçelovƒõ</strong> a dle z√°vislosti na objemu (fixn√≠/variabiln√≠).</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "VIII",
                title: "VIII. WACC",
                intro: "WACC (Weighted Average Cost of Capital) pom√°h√° naj√≠t optim√°ln√≠ pomƒõr mezi dluhem a vlastn√≠m kapit√°lem.",
                questions: [
                    {
                        q: "33. Urƒçete jednu v√Ωhodu a jednu nev√Ωhodu financov√°n√≠ kr√°tkodob√Ωmi zdroji ve srovn√°n√≠ s dlouhodob√Ωmi.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>V√Ωhoda: Ni≈æ≈°√≠ cena.</strong> Kr√°tkodob√© √∫vƒõry maj√≠ obvykle ni≈æ≈°√≠ √∫rok (ni≈æ≈°√≠ rizikov√° pr√©mie). Jsou flexibilnƒõj≈°√≠.</li>
                                    <li><strong>Nev√Ωhoda: Riziko refinancov√°n√≠.</strong> Nutnost brzy splatit/obnovit. P≈ôi zhor≈°en√≠ trhu nemus√≠ banka √∫vƒõr obnovit -> platebn√≠ neschopnost.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "34. Co vyjad≈ôuje WACC a jak vypad√° jeho graf?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>WACC:</strong> Pr≈Ømƒõrn√° cena za 1 Kƒç kapit√°lu (v√°≈æen√Ω pr≈Ømƒõr ceny VK a CK).</li>
                                    <li><strong>Graf:</strong> Tvar p√≠smene <strong>"U"</strong>. Zpoƒç√°tku s dluhem WACC kles√°, ale po p≈ôekroƒçen√≠ optima prudce roste kv≈Øli riziku bankrotu.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "35. V ƒçem spoƒç√≠v√° funkce WACC p≈ôi hled√°n√≠ optim√°ln√≠ kapit√°lov√© struktury?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Optim√°ln√≠ struktura je ta, kde je <strong>WACC minim√°ln√≠</strong>.</li>
                                    <li>V tomto bodƒõ je hodnota podniku maxim√°ln√≠. WACC slou≈æ√≠ jako "kompas" pro rozhodov√°n√≠ o financov√°n√≠.</li>
                                </ul>
                            </div>`
                    }
                ],
                hasTool: "wacc_chart"
            },
            {
                id: "IX",
                title: "IX. N√°klady",
                intro: "Klasifikace n√°klad≈Ø je z√°kladem pro kalkulace a rozhodov√°n√≠. Rozli≈°ujeme fixn√≠, variabiln√≠, p≈ô√≠m√© a nep≈ô√≠m√© n√°klady.",
                questions: [
                    {
                        q: "36. Vysvƒõtlete rozd√≠l mezi fixn√≠mi a variabiln√≠mi n√°klady.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Fixn√≠ n√°klady (FC):</strong> Nez√°visl√© na objemu v√Ωroby. Plat√≠ se i p≈ôi odst√°vce (n√°jem, odpisy, ƒçasov√© mzdy).</li>
                                    <li><strong>Variabiln√≠ n√°klady (VC):</strong> Mƒõn√≠ se s objemem produkce (line√°rnƒõ). Kdy≈æ se nevyr√°b√≠, jsou nulov√© (materi√°l, √∫kolov√© mzdy).</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "37. Vysvƒõtlete souvislost mezi p≈ô√≠m√Ωmi a jednicov√Ωmi n√°klady.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Jednicov√©:</strong> Technicky zmƒõ≈ôiteln√© na 1 kus (nap≈ô. 2 kg mouky na chl√©b).</li>
                                    <li><strong>P≈ô√≠m√©:</strong> √öƒçetn√≠ pojem. Lze je p≈ô√≠mo p≈ôi≈ôadit v√Ωrobku. Jednicov√© n√°klady tvo≈ô√≠ vƒõt≈°inu p≈ô√≠m√Ωch n√°klad≈Ø.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "38. Definujte pojem implicitn√≠ n√°klady.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>N√°klady obƒõtovan√© p≈ô√≠le≈æitosti.</strong> V√Ωnos, o kter√Ω p≈ôich√°z√≠me t√≠m, ≈æe zdroje vyu≈æ√≠v√°me v podnik√°n√≠ m√≠sto nejlep≈°√≠ alternativy.</li>
                                    <li><em>P≈ô√≠klad:</em> U≈°l√° mzda podnikatele (kdyby byl zamƒõstnancem) nebo u≈°l√Ω n√°jem z vlastn√≠ budovy.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "39. Vysvƒõtlete rozd√≠l mezi provozn√≠mi a finanƒçn√≠mi n√°klady.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Provozn√≠:</strong> Vƒõcn√° str√°nka (v√Ωroba/obchod). Materi√°l, mzdy, odpisy. Z√°klad pro EBIT.</li>
                                    <li><strong>Finanƒçn√≠:</strong> Financov√°n√≠ (dluhy). √öroky, poplatky, kurzov√© ztr√°ty.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "40. Vysvƒõtlete pojem \"n√°kladov√© st≈ôedisko\".",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Nejmen≈°√≠ organizaƒçn√≠ jednotka (d√≠lna, sklad) odpovƒõdn√° za vznikl√© n√°klady.</li>
                                    <li>Umo≈æ≈àuje kontrolu hospod√°rnosti a p≈ôesnƒõj≈°√≠ rozpoƒç√≠t√°n√≠ re≈æie.</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "X",
                title: "X. Finanƒçn√≠ P√°ka (Doplnƒõn√≠)",
                intro: "Doplnƒõn√≠ k t√©matu finanƒçn√≠ p√°ky z prvn√≠ sekce.",
                questions: [
                    {
                        q: "41. Vysvƒõtlete princip finanƒçn√≠ p√°ky (viz ot. 4).",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Vyu≈æit√≠ ciz√≠ho kapit√°lu ke zv√Ω≈°en√≠ rentability vlastn√≠ho kapit√°lu.</li>
                                    <li>Funguje, proto≈æe dluh m√° fixn√≠ cenu. Pokud podnik vydƒõl√° v√≠c, ne≈æ je √∫rok, nadv√Ωnos p≈ôipad√° vlastn√≠k≈Øm.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "42. Za jak√Ωch okolnost√≠ se pozitivn√≠ efekt finanƒçn√≠ p√°ky neprojev√≠?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Pokud je <strong>ROA < √∫rokov√° m√≠ra</strong>.</li>
                                    <li>Podnik vydƒõl√°v√° m√©nƒõ, ne≈æ plat√≠ bance. Rozd√≠l dopl√°c√≠ ze sv√©ho, co≈æ sni≈æuje zisk vlastn√≠k≈Ø (negativn√≠ p√°ka).</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "XI",
                title: "XI. Koeficient Bezpeƒçnosti",
                intro: "Ukazatel, kter√Ω ≈ô√≠k√°, jak bezpeƒçnƒõ daleko je podnik od bodu, kdy zaƒçne prodƒõl√°vat.",
                questions: [
                    {
                        q: "43. Uveƒète, jakou informaci pod√°v√° koeficient bezpeƒçnosti. Urƒçete koeficient bezpeƒçnosti pro firmu, kter√° vykazuje nulov√Ω zisk.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Ud√°v√°, o kolik % mohou klesnout tr≈æby, ne≈æ se podnik dostane do ztr√°ty.</li>
                                    <li>P≈ôi nulov√©m zisku je podnik p≈ôesnƒõ v bodƒõ zvratu. Nem√° rezervu. Koeficient je <strong>0 (nula)</strong>.</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "XII",
                title: "XII. Bod Zvratu",
                intro: "Bod zvratu (Break-even Point) je moment, kdy tr≈æby pokryj√≠ n√°klady a zisk je nulov√Ω. Kl√≠ƒçov√Ω koncept pro pl√°nov√°n√≠.",
                questions: [
                    {
                        q: "44. Definice bod zvratu a zakreslete jej.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Definice:</strong> Objem v√Ωroby, kde Tr≈æby = N√°klady (Zisk = 0).</li>
                                    <li><strong>Graf:</strong> Pr≈Øseƒç√≠k p≈ô√≠mky tr≈æeb a celkov√Ωch n√°klad≈Ø.</li>
                                    <li><em>Vzorec:</em> Q = Fixn√≠ n√°klady / (Cena - Variabiln√≠ n√°klady).</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "45. Dosahuje podnik kladn√©ho zisku, jestli≈æe vyr√°b√≠ a prod√°v√° objem produkce, kter√Ω je ni≈æ≈°√≠ ne≈æ bod zvratu?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Ne.</strong> Pod bodem zvratu tr≈æby nepokryj√≠ n√°klady (hlavnƒõ fixn√≠). Podnik je ve <strong>ztr√°tƒõ</strong>.</li>
                                </ul>
                            </div>`
                    }
                ],
                hasTool: "bep_chart"
            },
            {
                id: "XIII",
                title: "XIII. Obƒõ≈æn√Ω Majetek",
                intro: "Obƒõ≈æn√Ω majetek neust√°le mƒõn√≠ svou formu v provozn√≠m cyklu podniku.",
                questions: [
                    {
                        q: "46. Vyjmenujte jednotliv√© polo≈æky obƒõ≈æn√Ωch aktiv.",
                        a: `<div class="answer-content">
                                <ol>
                                    <li><strong>Z√°soby:</strong> Materi√°l, nedokonƒçen√° v√Ωroba, v√Ωrobky, zbo≈æ√≠.</li>
                                    <li><strong>Pohled√°vky:</strong> N√°roky na platby od odbƒõratel≈Ø.</li>
                                    <li><strong>Kr√°tkodob√Ω finanƒçn√≠ majetek:</strong> Obchodovateln√© cenn√© pap√≠ry.</li>
                                    <li><strong>Penƒõ≈æn√≠ prost≈ôedky:</strong> Hotovost a √∫ƒçty.</li>
                                </ol>
                            </div>`
                    },
                    {
                        q: "47. Struƒçnƒõ popi≈°te princip obƒõ≈æn√Ωch aktiv. Kter√° z polo≈æek je nejm√©nƒõ likvidn√≠?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Princip:</strong> Neust√°l√Ω kolobƒõh (Pen√≠ze -> Materi√°l -> V√Ωroba -> Pohled√°vky -> Pen√≠ze).</li>
                                    <li><strong>Nejm√©nƒõ likvidn√≠:</strong> Z√°soby (zejm√©na rozpracovan√° v√Ωroba). Cesta k penƒõz≈Øm je nejdel≈°√≠.</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "XIV",
                title: "XIV. Kalkulace",
                intro: "Metody p≈ôi≈ôazov√°n√≠ n√°klad≈Ø v√Ωkon≈Øm. Rozli≈°ujeme kalkulace √∫pln√Ωch a ne√∫pln√Ωch n√°klad≈Ø.",
                questions: [
                    {
                        q: "48. Jak√Ω typ n√°kladov√Ωch kalkulac√≠ vyu≈æ√≠v√° tzv. rozvrhovou sazbu?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Kalkulace √∫pln√Ωch n√°klad≈Ø.</strong></li>
                                    <li>Sazba slou≈æ√≠ k rozpoƒç√≠t√°n√≠ re≈æie na v√Ωrobky.</li>
                                    <li><em>Vzorec:</em> Sazba = Re≈æie / Rozvrhov√° z√°kladna.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "49. M≈Ø≈æe b√Ωt hrub√© rozpƒõt√≠ ni≈æ≈°√≠ ne≈æ p≈ô√≠spƒõvek na √∫hradu?",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Zpravidla ne.</strong></li>
                                    <li>Hrub√© rozpƒõt√≠ = Cena - P≈ô√≠m√© n√°klady.</li>
                                    <li>P≈ô√≠spƒõvek na √∫hradu = Cena - Variabiln√≠ n√°klady.</li>
                                    <li>Variabiln√≠ n√°klady (p≈ô√≠m√© + var. re≈æie) jsou vy≈°≈°√≠ ne≈æ jen p≈ô√≠m√©. Proto je P≈ô√≠spƒõvek obvykle ni≈æ≈°√≠.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "50. Vysvƒõtlete rozd√≠l mezi p≈ô√≠m√Ωmi a nep≈ô√≠m√Ωmi n√°klady.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>P≈ô√≠m√©:</strong> Lze p≈ôesnƒõ p≈ôi≈ôadit v√Ωrobku (materi√°l, mzda dƒõln√≠ka).</li>
                                    <li><strong>Nep≈ô√≠m√© (re≈æijn√≠):</strong> Spoleƒçn√© pro v√≠ce v√Ωkon≈Ø, mus√≠ se rozpoƒç√≠t√°vat (n√°jem, energie, plat ≈ôeditele).</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "XV",
                title: "XV. Odpisy (Doplnƒõn√≠)",
                intro: "Opakov√°n√≠ a doplnƒõn√≠ k odpis≈Øm.",
                questions: [
                    {
                        q: "51. Definice odpis≈Ø.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Penƒõ≈æn√≠ vyj√°d≈ôen√≠ <strong>trval√©ho sn√≠≈æen√≠ hodnoty</strong> majetku opot≈ôeben√≠m. N√°klad, kter√Ω nen√≠ v√Ωdajem.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "52. P≈ô√≠klad neodepisovan√©ho majetku.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Pozemky</strong>, umƒõleck√° d√≠la, sb√≠rky.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "53. √öƒçel √∫ƒçetn√≠ch vs. da≈àov√Ωch odpis≈Ø.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>√öƒçetn√≠:</strong> Vƒõrn√Ω obraz opot≈ôeben√≠ (podnik si urƒçuje s√°m).</li>
                                    <li><strong>Da≈àov√©:</strong> Stanoven√≠ z√°kladu danƒõ dle z√°kona (fisk√°ln√≠ politika).</li>
                                </ul>
                            </div>`
                    }
                ]
            },
            {
                id: "XVI",
                title: "XVI. ≈Ωivnost",
                intro: "Pr√°vn√≠ r√°mec podnik√°n√≠ jednotlivc≈Ø v ƒåR.",
                questions: [
                    {
                        q: "54. Podm√≠nky provozov√°n√≠ ≈æivnosti.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>V≈°eobecn√©:</strong> Sv√©pr√°vnost (18+), bez√∫honnost.</li>
                                    <li><strong>Zvl√°≈°tn√≠:</strong> Odborn√° zp≈Øsobilost (vzdƒõl√°n√≠/praxe) pro ≈ôemesln√©, v√°zan√© a koncesovan√© ≈æivnosti.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "55. Rozdƒõlen√≠ ≈æivnost√≠.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li><strong>Ohla≈°ovac√≠:</strong> Vznikaj√≠ ohl√°≈°en√≠m.
                                        <ul>
                                            <li>≈òemesln√© (v√Ωuƒçn√≠ list).</li>
                                            <li>V√°zan√© (osvƒõdƒçen√≠).</li>
                                            <li>Voln√© (bez odbornosti).</li>
                                        </ul>
                                    </li>
                                    <li><strong>Koncesovan√©:</strong> Vy≈æaduj√≠ povolen√≠ (koncesi). P≈ô√≠snƒõj≈°√≠ regulace.</li>
                                </ul>
                            </div>`
                    },
                    {
                        q: "56. √öloha odpovƒõdn√©ho z√°stupce.",
                        a: `<div class="answer-content">
                                <ul>
                                    <li>Garantuje <strong>odbornou str√°nku</strong> ≈æivnosti.</li>
                                    <li>Umo≈æ≈àuje podnikat osobƒõ, kter√° sama nespl≈àuje odbornou zp≈Øsobilost (z√°stupce "prop≈Øjƒç√≠" sv√© vzdƒõl√°n√≠).</li>
                                </ul>
                            </div>`
                    }
                ]
            }
        ];

        // --- APP INITIALIZATION & RENDERING ---

        document.addEventListener('DOMContentLoaded', () => {
            renderSidebar();
            renderContent();
            setupSearch();
            setupMobileMenu();
            initCharts();
            initTools();
        });

        function renderSidebar() {
            const navContainer = document.getElementById('sidebar-nav');
            const mobileNavContainer = document.getElementById('mobile-nav-content');
            
            let navHTML = '';
            examData.forEach((section, index) => {
                navHTML += `
                    <a href="#section-${section.id}" 
                       class="nav-item block px-6 py-3 text-sm text-gray-600 hover:bg-gray-50 hover:text-blue-900 transition-colors"
                       onclick="highlightNav(this)">
                       <span class="font-bold mr-2">${section.id}</span>
                       <span class="truncate">${section.title.replace(/^[IVX]+\. /, '')}</span>
                    </a>
                `;
            });

            navContainer.innerHTML = navHTML;
            mobileNavContainer.innerHTML = navHTML;
        }

        function highlightNav(element) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            // Close mobile menu if open
            document.getElementById('mobile-menu-overlay').classList.add('hidden');
            document.getElementById('mobile-menu').classList.add('-translate-x-full');
        }

        function renderContent() {
            const container = document.getElementById('modules-container');
            let contentHTML = '';

            examData.forEach(section => {
                // Generate Tool Placeholder if exists
                let toolHTML = '';
                if (section.hasTool) {
                    toolHTML = getToolHTML(section.hasTool);
                }

                // Generate Questions Accordion
                let questionsHTML = '';
                section.questions.forEach((qa, idx) => {
                    questionsHTML += `
                        <div class="border-b border-gray-100 last:border-0 search-item">
                            <button class="w-full text-left px-6 py-4 focus:outline-none hover:bg-gray-50 transition-colors flex justify-between items-start group" onclick="toggleAccordion(this)">
                                <span class="font-medium text-gray-800 group-hover:text-blue-800 pr-4 searchable-q w-11/12">${qa.q}</span>
                                <span class="text-gray-400 transform transition-transform duration-200 text-xl font-bold ml-auto">+</span>
                            </button>
                            <div class="accordion-content bg-gray-50">
                                <div class="px-6 py-4 text-gray-700 leading-relaxed border-l-4 border-blue-500 ml-6 mb-4 searchable-a">
                                    ${qa.a}
                                </div>
                            </div>
                        </div>
                    `;
                });

                contentHTML += `
                    <section id="section-${section.id}" class="scroll-mt-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden card-hover">
                            <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-white to-gray-50">
                                <h3 class="text-xl font-bold text-gray-900 mb-2">${section.title}</h3>
                                <p class="text-gray-600 text-sm leading-relaxed">${section.intro}</p>
                            </div>
                            
                            ${toolHTML}

                            <div class="divide-y divide-gray-100">
                                ${questionsHTML}
                            </div>
                        </div>
                    </section>
                `;
            });

            container.innerHTML = contentHTML;
            document.getElementById('visible-count').textContent = calculateTotalQuestions();
        }

        function getToolHTML(toolType) {
            if (toolType === 'leverage') {
                return `
                    <div class="p-6 bg-blue-50 border-b border-gray-100">
                        <h4 class="font-bold text-blue-900 mb-4 flex items-center">
                            <span class="mr-2">‚ö°</span> Simul√°tor Finanƒçn√≠ P√°ky
                        </h4>
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="flex-1 space-y-4">
                                <div>
                                    <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">ROA (V√Ωnosnost aktiv) <span id="val-roa">10%</span></label>
                                    <input type="range" min="0" max="20" value="10" step="1" class="w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer" oninput="updateLeverage(this.value, 'roa')">
                                </div>
                                <div>
                                    <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">√örokov√° m√≠ra (√övƒõr) <span id="val-interest">5%</span></label>
                                    <input type="range" min="0" max="15" value="5" step="1" class="w-full h-2 bg-red-200 rounded-lg appearance-none cursor-pointer" oninput="updateLeverage(this.value, 'interest')">
                                </div>
                                <div class="text-xs text-gray-500 mt-2 bg-white p-2 rounded border border-blue-100">
                                    <strong>Princip:</strong> Pokud je ROA > √örok, dluh zvy≈°uje v√Ωnosnost pro vlastn√≠ky (Sloupec "S dluhem" bude vy≈°≈°√≠).
                                </div>
                            </div>
                            <div class="flex-1 chart-container" style="height: 200px;">
                                <canvas id="chart-leverage"></canvas>
                            </div>
                        </div>
                    </div>
                `;
            }
            if (toolType === 'bep_chart') {
                return `
                    <div class="p-6 bg-amber-50 border-b border-gray-100">
                        <h4 class="font-bold text-amber-900 mb-4 flex items-center">
                            <span class="mr-2">üìà</span> Vizualizace Bodu Zvratu
                        </h4>
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="flex-1 space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Fixn√≠ n√°klady</label>
                                        <input type="number" value="1000" class="w-full p-1 border rounded text-sm" id="inp-fc" onchange="updateBEP()">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Cena za kus</label>
                                        <input type="number" value="50" class="w-full p-1 border rounded text-sm" id="inp-p" onchange="updateBEP()">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Var. n√°klady/ks</label>
                                        <input type="number" value="30" class="w-full p-1 border rounded text-sm" id="inp-vc" onchange="updateBEP()">
                                    </div>
                                </div>
                                <div id="bep-result" class="text-sm font-bold text-amber-800 mt-2 p-2 bg-white rounded border border-amber-200 text-center">
                                    Bod zvratu: 50 ks
                                </div>
                            </div>
                            <div class="flex-1 chart-container" style="height: 220px;">
                                <canvas id="chart-bep"></canvas>
                            </div>
                        </div>
                    </div>
                `;
            }
            if (toolType === 'liquidity_pyramid') {
                return `
                     <div class="p-6 bg-green-50 border-b border-gray-100">
                        <h4 class="font-bold text-green-900 mb-4">Pyramida Likvidity</h4>
                        <div class="flex flex-col space-y-2 max-w-md mx-auto">
                            <div class="bg-green-600 text-white p-3 text-center rounded shadow-sm font-bold transform scale-105">1. Pen√≠ze (Hotovost, √öƒçty)</div>
                            <div class="bg-green-500 text-white p-3 text-center rounded shadow-sm font-medium w-11/12 mx-auto">2. Kr√°tkodob√© cenn√© pap√≠ry</div>
                            <div class="bg-green-400 text-white p-3 text-center rounded shadow-sm w-10/12 mx-auto">3. Pohled√°vky</div>
                            <div class="bg-green-300 text-green-900 p-3 text-center rounded shadow-sm w-9/12 mx-auto">4. Z√°soby (Hotov√© v√Ωrobky -> Materi√°l)</div>
                            <div class="bg-green-200 text-green-900 p-3 text-center rounded shadow-sm w-8/12 mx-auto text-sm">5. Dlouhodob√Ω majetek</div>
                            <div class="text-center text-xs text-gray-500 mt-1">‚¨á Klesaj√≠c√≠ likvidnost ‚¨á</div>
                        </div>
                    </div>
                `;
            }
            if (toolType === 'wacc_chart') {
                return `
                    <div class="p-6 bg-purple-50 border-b border-gray-100">
                         <h4 class="font-bold text-purple-900 mb-2">K≈ôivka WACC</h4>
                         <p class="text-xs text-gray-600 mb-4">Zobrazuje, jak se mƒõn√≠ n√°klady na kapit√°l s rostouc√≠m zadlu≈æen√≠m.</p>
                         <div class="chart-container" style="height: 200px;">
                             <canvas id="chart-wacc"></canvas>
                         </div>
                    </div>
                `;
            }
            if (toolType === 'nace_vis') {
                return `
                    <div class="p-6 bg-gray-50 border-b border-gray-100">
                        <div class="flex flex-wrap gap-2 justify-center text-sm">
                            <div class="bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full border border-emerald-200">Prim√°rn√≠ (Zemƒõdƒõlstv√≠)</div>
                            <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full border border-blue-200">Sekund√°rn√≠ (Pr≈Ømysl)</div>
                            <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full border border-purple-200">Terci√°rn√≠ (Slu≈æby)</div>
                            <div class="bg-pink-100 text-pink-800 px-3 py-1 rounded-full border border-pink-200">Kvart√©rn√≠ (Vƒõda/V√Ωzkum)</div>
                        </div>
                    </div>
                `;
            }
            return '';
        }

        // --- INTERACTION LOGIC ---

        function toggleAccordion(btn) {
            const content = btn.nextElementSibling;
            const icon = btn.querySelector('span:last-child');
            const isOpen = content.classList.contains('open');

            if (isOpen) {
                content.classList.remove('open');
                content.style.maxHeight = '0';
                icon.innerText = '+';
                icon.classList.remove('rotate-45');
            } else {
                content.classList.add('open');
                // Calculate actual height needed or use a safe large max-height
                content.style.maxHeight = content.scrollHeight + 'px'; 
                icon.innerText = '+'; // Visual trick, rotation makes it X
                icon.classList.add('rotate-45');
                icon.style.transform = 'rotate(45deg)';
            }
        }

        function calculateTotalQuestions() {
            return examData.reduce((acc, section) => acc + section.questions.length, 0);
        }

        // --- SEARCH ---
        function setupSearch() {
            const input = document.getElementById('global-search');
            input.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                let visibleCount = 0;

                // Loop through rendered DOM elements
                document.querySelectorAll('.search-item').forEach(item => {
                    const qText = item.querySelector('.searchable-q').textContent.toLowerCase();
                    const aText = item.querySelector('.searchable-a').textContent.toLowerCase();
                    
                    if (qText.includes(term) || aText.includes(term)) {
                        item.style.display = 'block';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Show/Hide sections based on visible children
                document.querySelectorAll('section').forEach(sec => {
                    const visibleChildren = sec.querySelectorAll('.search-item[style="display: block;"]').length;
                    const title = sec.querySelector('h3').textContent.toLowerCase();
                    
                    if (visibleChildren > 0 || (title.includes(term) && term.length > 2)) {
                        sec.style.display = 'block';
                        // If section matches, show all its questions
                        if (title.includes(term) && term.length > 2) {
                             const hiddenItems = sec.querySelectorAll('.search-item[style="display: none;"]');
                             hiddenItems.forEach(i => i.style.display = 'block');
                             visibleCount += hiddenItems.length;
                        }
                    } else {
                        sec.style.display = 'none';
                    }
                });

                document.getElementById('visible-count').textContent = visibleCount;
            });
        }

        // --- CHARTS & CALCULATORS ---

        // Global Chart instances
        let leverageChart, bepChart, waccChart;
        let leverageState = { roa: 10, interest: 5 };

        function initCharts() {
            initLeverageChart();
            initBEPChart();
            initWACCChart();
        }

        // 1. Leverage Chart
        function initLeverageChart() {
            const ctx = document.getElementById('chart-leverage');
            if (!ctx) return;

            leverageChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Bez Dluhu', 'S Dluhem (50%)'],
                    datasets: [{
                        label: 'V√Ωnosnost Vlastn√≠ho Kapit√°lu (ROE)',
                        data: [10, 15],
                        backgroundColor: ['#93C5FD', '#1E40AF'],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 30, title: {display: true, text: '%'} } }
                }
            });
            updateLeverageCalc();
        }

        function updateLeverage(val, type) {
            leverageState[type] = parseFloat(val);
            document.getElementById(`val-${type}`).innerText = val + '%';
            updateLeverageCalc();
        }

        function updateLeverageCalc() {
            const roa = leverageState.roa;
            const interest = leverageState.interest;
            
            const roeNoDebt = roa;
            // Simplified ROE with Debt = ROA + (ROA - Interest)
            const roeWithDebt = roa + (roa - interest);

            leverageChart.data.datasets[0].data = [roeNoDebt, roeWithDebt];
            
            const colorDebt = roeWithDebt < roeNoDebt ? '#EF4444' : '#1E40AF';
            leverageChart.data.datasets[0].backgroundColor = ['#93C5FD', colorDebt];
            
            leverageChart.update();
        }

        // 2. Break-Even Chart
        function initBEPChart() {
            const ctx = document.getElementById('chart-bep');
            if (!ctx) return;

            const points = [0, 20, 40, 60, 80, 100];
            
            bepChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: points,
                    datasets: [
                        { label: 'Tr≈æby', data: [], borderColor: '#059669', borderWidth: 2 },
                        { label: 'N√°klady', data: [], borderColor: '#DC2626', borderWidth: 2 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    elements: { point: { radius: 0 } }
                }
            });
            updateBEP();
        }

        function updateBEP() {
            const fc = parseFloat(document.getElementById('inp-fc').value) || 0;
            const p = parseFloat(document.getElementById('inp-p').value) || 0;
            const vc = parseFloat(document.getElementById('inp-vc').value) || 0;

            const bepQty = p > vc ? Math.round(fc / (p - vc)) : "Nekoneƒçno";
            document.getElementById('bep-result').innerText = `Bod zvratu: ${bepQty} ks`;

            const points = [0, bepQty * 0.5, bepQty, bepQty * 1.5, bepQty * 2].map(Math.round);
            if (typeof bepQty !== 'number') points = [0, 50, 100];

            const revenues = points.map(q => q * p);
            const costs = points.map(q => fc + (q * vc));

            bepChart.data.labels = points;
            bepChart.data.datasets[0].data = revenues;
            bepChart.data.datasets[1].data = costs;
            bepChart.update();
        }

        // 3. WACC Chart
        function initWACCChart() {
            const ctx = document.getElementById('chart-wacc');
            if (!ctx) return;

            const leverageRatio = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90];
            const costEquity = leverageRatio.map(x => 10 + x * 0.15); 
            const costDebt = leverageRatio.map(x => 4 + (x > 50 ? (x-50)*0.2 : 0));
            const wacc = leverageRatio.map((d, i) => {
                const e = 100 - d;
                return (e/100 * costEquity[i]) + (d/100 * costDebt[i] * 0.8);
            });

            waccChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: leverageRatio,
                    datasets: [
                        { label: 'WACC', data: wacc, borderColor: '#7C3AED', borderWidth: 3, tension: 0.4 },
                        { label: 'N√°klady VK', data: costEquity, borderColor: '#D1D5DB', borderDash: [5,5], borderWidth: 1 },
                        { label: 'N√°klady Dluhu', data: costDebt, borderColor: '#9CA3AF', borderDash: [5,5], borderWidth: 1 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: {display: true, text: 'Zadlu≈æenost (%)'} },
                        y: { title: {display: true, text: 'N√°klady (%)'} }
                    },
                    plugins: { tooltip: { mode: 'index', intersect: false } }
                }
            });
        }

        function initTools() {
            window.addEventListener('resize', () => {
                leverageChart?.resize();
                bepChart?.resize();
                waccChart?.resize();
            });
        }

        function setupMobileMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            const close = document.getElementById('close-mobile-menu');

            function toggle() {
                const isHidden = menu.classList.contains('-translate-x-full');
                if (isHidden) {
                    menu.classList.remove('-translate-x-full');
                    overlay.classList.remove('hidden');
                } else {
                    menu.classList.add('-translate-x-full');
                    overlay.classList.add('hidden');
                }
            }

            btn.addEventListener('click', toggle);
            close.addEventListener('click', toggle);
            overlay.addEventListener('click', toggle);
        }

    </script>
</body>
</html>
